(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),r=n(6),i=n.n(r),s=(n(15),n(9)),u=n(2);n(16);function l(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{className:"header__logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAAiCAMAAABRP3qRAAAAOVBMVEUAAAD///////////////////////////////////////////////////////////////////////8KOjVvAAAAEnRSTlMAXyDfn78Qf+9AH09vz68wP49BRYaRAAADJUlEQVRYw8WW6bokEQyGEyFFoRb3f7GDtp7qWcxzpic/Wlck5RUfBT5pKhq+7WF9wuct4HUd99suy/B5CzuA0HDa2CCAkbcAOG+JAI6BN4mfouo8pwaUkUUBkkViQXiRAdqB7lS8T1pwiH6rPC42DKdPv4mHIyzBJy0ckiRUHuFJngC3PjDzGEk+8oho/NB78X77ehnNlSeJKG0rvjxGHkMXCwIRoumvQ8vk3f4BD6gNDAk+FDgE8JfZAOQdeTASusIT7JSXnes8FhH5Nzy5QIcmp+AkpSXw4b0SkYe997LyqDkR/4pHxZz9jyIL9Z5b3qE/Fp5gpnj6Fp516zzTxjfhv/NMipb/nye40fXgsdITqU2MGnj5pC2SkzKt8iGl5BrhDiJ/oFjlOfSk6C265MhjKBS7+ekjMdQ0tBrx1gK2RR6ZUs2oZsKBZwvdPPcdOAA9edgPEXKRh0tOGwoHHpsPBHdZSe1kEPmv3U+sPoP5r6tnkMxZaJ3KdV3jAZUV3WUpBp48TKcwlVn2cDPpuQboK/91IUWs8ZgyfHN0nnHlRBJanf1VhCSd5QdPIsdhvdUaD8SBCKAP1Sl86WmdXFr7i/1+hiGLdcpa4+mKphD8UJVJWtl9ljUg/DmP6ydIpV/j4VTTpuaBx6SOrdqReuuUAx3OPHmm9ex0KzzlZfxqiQceGyarsjh1edIHvuFRpY59h96LPFnR7bHz4HseEHI+f548+/Q9lCs8Rbf6VWgBX+pz4GiifTBuVYD4sV6P+mxrPEXRXDZ05xG/rvVVb5Izz93qWF/tVnkySlbzxAPR7d+n9qGPkWc6L1vHtcLTXtyOIZxmbZoSnOGcZR0OL1AjT52c5iGCYJnH1G/fzGMGxQp67UIOfThs9TkGctm8wCnJrfPAS52i83Q3YbtjyOrzOdLqJpU7BRpx1i9LUCIl+aL4ZR5XbvadpxclaOV139ynzrGHyu0xXXP1cCHRpHMTGdd5uE2183Sg+ayxuvsUzxel82sEnbDKUwtOMPJUQ19vetzypC40CD0uk+McoWPSt5u4EO0++y4bffw17trniBNW7AeDqUk/kdiNfQAAAABJRU5ErkJggg==",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})})}var p=Object(c.createContext)();function d(e){var t=o.a.useContext(p),n=e.card.ownerID===t._id,c="element__delete ".concat(n?"popup_visible":""),r=e.card.likes.some((function(e){return e._id===t._id})),i="element__button ".concat(r?"element__button_liked":"");return Object(a.jsxs)("div",{className:"element",children:[Object(a.jsx)("img",{className:"element__img",src:e.card.link,onClick:function(){return function(e){e.handleCardClick(),e.onCardClick(e.card)}(e)},alt:"\u041d\u0435\u043e\u0442\u0440\u0438\u0441\u043e\u0432\u0430\u0432\u0448\u0430\u044f\u0441\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"}),Object(a.jsx)("button",{className:c,type:"button",onClick:function(){return function(e){e.onCardDelete(e.card)}(e)}}),Object(a.jsxs)("div",{className:"element__caption",children:[Object(a.jsx)("h2",{className:"element__text",children:e.card.name}),Object(a.jsxs)("div",{className:"element__section",children:[Object(a.jsx)("button",{className:i,onClick:function(){return function(e){e.onCardLike(e.card)}(e)},type:"button"}),Object(a.jsx)("p",{className:"element__likeCount",children:e.card.numberOfLikes})]})]})]})}function m(e){var t=o.a.useContext(p);return Object(a.jsx)("div",{children:Object(a.jsxs)("main",{className:"main",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__art",children:[Object(a.jsx)("img",{className:"profile__logo",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"}),Object(a.jsx)("div",{className:"profile__overlay",onClick:e.onEditAvatar,children:Object(a.jsx)("img",{className:"profile__pen",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB+SURBVHgB7dbBCYAwDAXQ4ASO4Ca6gSPoBo6gGzhSR8koMdIIoSBe8vGSD5/SSx6hlxIBIiKDttwnoWIISw1DsAYRCPaCPCkUkQ8kZqNEEkkkkUT+RAxa4YjDduQmhx/msNhNbCA32BaNTNC3sHTa2d177UKISP3ondqRgLkAC8rJEj0Pt60AAAAASUVORK5CYII=",alt:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("p",{className:"profile__occupation",children:t.about}),Object(a.jsx)("button",{className:"profile__button",type:"button",onClick:e.onEditProfile})]}),Object(a.jsx)("button",{className:"profile__add-button",type:"button",onClick:e.onAddPlace})]}),0!==e.cards.length?Object(a.jsx)("section",{className:"elements",children:Array.prototype.map.call(e.cards,(function(t,n){return Object(a.jsx)(d,{card:t,myId:e.myId,onCardClick:e.onCardClick,handleCardClick:e.handleCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t.cardId)}))}):""]})})}function h(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__text",children:"\xa9 2020 Mesto Russia"})})}var j=n(7),b=n(8),f=new(function(){function e(t){Object(j.a)(this,e),this.options=t}return Object(b.a)(e,[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-18/cards",{headers:this.options.headers}).then((function(t){return e._check(t)}))}},{key:"initProfileFomServer",value:function(){var e=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-18/users/me ",{headers:this.options.headers}).then((function(t){return e._check(t)}))}},{key:"postCardToServer",value:function(e,t){return fetch("https://mesto.nomoreparties.co/v1/cohort-18/cards",{method:"POST",headers:this.options.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"postLoginToServer",value:function(e,t,n){var a=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-18/users/me",{method:"PATCH",headers:this.options.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return a._check(e)}))}},{key:"deleteCardFromServer",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-18/cards/".concat(e),{method:"DELETE",headers:this.options.headers,body:JSON.stringify({})}).then((function(e){return t._check(e)}))}},{key:"likeCardOnServer",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-18/cards/likes/".concat(e),{method:"PUT",headers:this.options.headers,body:JSON.stringify({})}).then((function(e){return t._check(e)}))}},{key:"dislikeCardOnServer",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-18/cards/likes/".concat(e),{method:"DELETE",headers:this.options.headers,body:JSON.stringify({})}).then((function(e){return t._check(e)}))}},{key:"postAvatarToServer",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-18/users/me/avatar",{method:"PATCH",headers:this.options.headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._check(e)}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-18",headers:{authorization:"ece4ec17-0364-4590-98d8-28086b7fa384","Content-Type":"application/json"}}),O=Object(c.createContext)();function v(e){return Object(a.jsx)("div",{className:"popup ".concat(e.name," ").concat(e.isOpen?"popup_visible":""),children:Object(a.jsxs)("form",{className:"popup__container profile-container",name:"editProfile",onSubmit:e.onSubmit,noValidate:!0,children:[Object(a.jsx)("h2",{className:"popup__title",children:e.title}),Object(a.jsx)("button",{className:"popup__close profile__close",type:"button",onClick:e.onClose}),e.children]})})}function A(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)(""),l=Object(u.a)(s,2),d=l[0],m=l[1];var h=o.a.useContext(p);return Object(c.useEffect)((function(){i(h.name||""),m(h.about||"")}),[h]),Object(a.jsxs)(v,{name:"profile-popup",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:r,about:d})},children:[Object(a.jsx)("input",{id:"name-input",className:"popup__input profile-popup__input_name",name:"name",type:"text",minLength:"2",maxLength:"20",required:!0,value:r,onChange:function(e){i(e.target.value)}}),Object(a.jsx)("span",{id:"name-input-error",className:"popup__input-error"}),Object(a.jsx)("input",{id:"occupation-input",className:"popup__input profile-popup__input_occupation",name:"job",type:"text",minLength:"2",maxLength:"200",required:!0,value:d,onChange:function(e){m(e.target.value)}}),Object(a.jsx)("span",{id:"occupation-input-error",className:"popup__input-error"}),Object(a.jsx)("button",{className:"popup__button profile__submit",type:"submit",name:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}function _(e){var t=o.a.useRef();return Object(a.jsxs)(v,{name:"avatar-popup",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},children:[Object(a.jsx)("input",{ref:t,id:"url-input",className:"popup__input avatar-popup__input_image",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"avatar-image",type:"url",required:!0}),Object(a.jsx)("span",{id:"url-input-error",className:"popup__input-error"}),Object(a.jsx)("button",{className:"popup__button avatar-submit",type:"submit",name:"avatar-submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}function C(e){var t=o.a.useRef(),n=o.a.useRef();return Object(a.jsxs)(v,{name:"place-popup",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.onClose,children:[Object(a.jsx)("input",{ref:t,id:"image-input",className:"popup__input place-popup__input_name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"place-name",type:"text",minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("span",{id:"image-input-error",className:"popup__input-error"}),Object(a.jsx)("input",{ref:n,id:"url-input",className:"popup__input place-popup__input_image",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"place-image",type:"url",required:!0}),Object(a.jsx)("span",{id:"url-input-error",className:"popup__input-error"}),Object(a.jsx)("button",{className:"popup__button place-submit",type:"submit",name:"place-submit",onClick:function(a){a.preventDefault(),e.onApploadCard({name:t.current.value,url:n.current.value})},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}function k(e){return Object(a.jsx)("div",{className:"popup image-popup ".concat(e.isBigImageOpen?"popup_visible":""),children:Object(a.jsxs)("div",{className:"image-popup__container",children:[Object(a.jsx)("img",{className:"image-popup__img",alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",src:e.card.link}),Object(a.jsx)("div",{className:"caption",children:e.card.name}),Object(a.jsx)("button",{className:"popup__close image-popup__close",type:"button",onClick:e.onClose})]})})}var x=function(){var e=Object(c.useState)({avatar:"",about:"",name:"",_id:""}),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(!1),i=Object(u.a)(r,2),d=i[0],j=i[1],b=Object(c.useState)(!1),v=Object(u.a)(b,2),x=v[0],g=v[1],S=Object(c.useState)(!1),N=Object(u.a)(S,2),y=N[0],I=N[1],P=Object(c.useState)(!1),U=Object(u.a)(P,2),B=U[0],R=U[1],D=Object(c.useState)(""),E=Object(u.a)(D,2),T=E[0],L=E[1],H=Object(c.useState)(""),w=Object(u.a)(H,2),J=w[0],G=w[1],z=Object(c.useState)(""),V=Object(u.a)(z,2),Q=V[0],F=V[1],K=Object(c.useState)(""),q=Object(u.a)(K,2),X=q[0],M=q[1],Z=Object(c.useState)({name:"",link:""}),W=Object(u.a)(Z,2),Y=W[0],$=W[1],ee=Object(c.useState)([]),te=Object(u.a)(ee,2),ne=te[0],ae=te[1];function ce(e){var t=e.name,n=e.link,a=e.likes.length,c=e.likes;return{name:t,link:n,numberOfLikes:a,cardId:e._id,elementLikes:e.likes,ownerID:e.owner._id,likes:c}}function oe(){j(!1),g(!1),I(!1),R(!1),$({name:"",link:""})}return Object(c.useEffect)((function(){f.initProfileFomServer().then((function(e){F(e.avatar),G(e.about),L(e.name),M(e._id),o(e)})).catch((function(e){console.log(e)})),0===ne.length&&f.getInitialCards().then((function(e){var t=[];e.forEach((function(e){t.push(ce(e))})),ae(t)})).catch((function(e){console.log(e)}))}),[null]),Object(a.jsx)(p.Provider,{value:n,children:Object(a.jsx)(O.Provider,{value:ae,children:Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(l,{}),Object(a.jsx)(m,{onEditProfile:function(){g(!0)},onAddPlace:function(){I(!0)},onEditAvatar:function(){j(!0)},handleCardClick:function(){R(!0)},userAvatar:Q,userName:T,userDescription:J,cards:ne,myId:X,onCardClick:$,selectedCard:Y,onCardLike:function(e){e.likes.some((function(e){return e._id===n._id}))?f.dislikeCardOnServer(e.cardId).then((function(t){var n=ce(t),a=ne.map((function(t){return t.cardId===e.cardId?n:t}));ae(a)})).catch((function(e){console.log(e)})):f.likeCardOnServer(e.cardId).then((function(t){var n=ce(t),a=ne.map((function(t){return t.cardId===e.cardId?n:t}));ae(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){f.deleteCardFromServer(e.cardId).then((function(){var t=ne.filter((function(t){return t.cardId!==e.cardId}));ae(t)})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(h,{}),Object(a.jsx)(A,{isOpen:x,onClose:oe,onUpdateUser:function(e){f.postLoginToServer(e.name,e.about).then((function(e){o(e),oe()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(_,{isOpen:d,onClose:oe,onUpdateAvatar:function(e){f.postAvatarToServer(e.avatar).then((function(e){o(e),oe()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(C,{isOpen:y,onClose:oe,onApploadCard:function(e){f.postCardToServer(e.name,e.url).then((function(e){var t=ce(e);ae([t].concat(Object(s.a)(ne))),oe()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(k,{card:Y,isOpen:!0,isBigImageOpen:B,onClose:oe})]})})})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(x,{})}),document.getElementById("root")),g()}},[[17,1,2]]]);
//# sourceMappingURL=main.4008b140.chunk.js.map